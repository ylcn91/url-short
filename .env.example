# ===========================================
# URL Shortener Platform - Environment Variables
# ===========================================
# Copy this file to .env and update the values
# Usage: cp .env.example .env
#
# Required variables are marked with (REQUIRED)
# Optional variables have default values

# ===========================================
# PostgreSQL Database Configuration
# ===========================================
# (REQUIRED) Database name
POSTGRES_DB=urlshortener_dev

# (REQUIRED) Database username
POSTGRES_USER=postgres

# (REQUIRED) Database password - CHANGE IN PRODUCTION!
POSTGRES_PASSWORD=postgres

# (Optional) Database port - Default: 5432
POSTGRES_PORT=5432

# (Optional) Full database URL for backend
# Default: jdbc:postgresql://postgres:5432/${POSTGRES_DB}
DATABASE_URL=jdbc:postgresql://postgres:5432/urlshortener_dev

# (Optional) Database connection pool settings
DATABASE_USERNAME=postgres
DATABASE_PASSWORD=postgres

# ===========================================
# Redis Cache Configuration
# ===========================================
# (Optional) Redis host - Default: localhost (dev) or redis (docker)
REDIS_HOST=redis

# (Optional) Redis port - Default: 6379
REDIS_PORT=6379

# (REQUIRED) Redis password - CHANGE IN PRODUCTION!
REDIS_PASSWORD=redis123

# (Optional) Redis database number - Default: 0
REDIS_DATABASE=0

# (Optional) Redis SSL - Default: false
REDIS_SSL=false

# ===========================================
# Kafka Message Broker Configuration
# ===========================================
# (Optional) Kafka port - Default: 9092
KAFKA_PORT=9092

# (Optional) Kafka bootstrap servers
# Default: localhost:9092 (dev) or kafka:29092 (docker)
KAFKA_BOOTSTRAP_SERVERS=kafka:29092

# ===========================================
# Backend (Spring Boot) Configuration
# ===========================================
# (REQUIRED) Spring Profile: dev, test, prod
SPRING_PROFILES_ACTIVE=dev

# (Optional) Backend server port - Default: 8080
BACKEND_PORT=8080
SERVER_PORT=8080

# (REQUIRED) Base URL for the application (used for generating short URLs)
BASE_URL=http://localhost:8080

# (REQUIRED) JWT Secret - MUST be at least 256 bits (32 characters)
# CHANGE THIS IN PRODUCTION! Generate with: openssl rand -base64 32
JWT_SECRET=your-256-bit-secret-key-change-this-in-production-please-use-strong-random-string

# (Optional) JWT token expiration in milliseconds
# Default: 86400000 (24 hours)
JWT_EXPIRATION=86400000

# (Optional) JWT refresh token expiration in milliseconds
# Default: 604800000 (7 days)
JWT_REFRESH_EXPIRATION=604800000

# (Optional) Logging levels
LOGGING_LEVEL_ROOT=INFO
LOGGING_LEVEL_APP=DEBUG
LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_WEB=INFO
LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_SECURITY=DEBUG

# (Optional) JVM Options for container environments
JAVA_OPTS=-XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0

# (Optional) Java Debug Wire Protocol port (for development)
# JAVA_DEBUG_PORT=5005

# ===========================================
# Frontend (Next.js) Configuration
# ===========================================
# (Optional) Frontend server port - Default: 3000
FRONTEND_PORT=3000

# (REQUIRED) Node environment: development, production
NODE_ENV=production

# (REQUIRED) Public API URL (accessible from browser)
# IMPORTANT: Must include /api/v1 path prefix
NEXT_PUBLIC_API_URL=http://localhost:8080/api/v1

# (REQUIRED) Public base URL (for the frontend application)
NEXT_PUBLIC_BASE_URL=http://localhost:3000

# (Optional) Internal API URL (server-side, container-to-container)
# Used for server-side rendering calls to backend
# Default: http://backend:8080/api/v1
INTERNAL_API_URL=http://backend:8080/api/v1

# (Optional) Enable Next.js telemetry - Default: 0 (disabled)
NEXT_TELEMETRY_DISABLED=1

# ===========================================
# CORS Configuration
# ===========================================
# (Optional) Allowed origins for CORS (comma-separated)
# Default: http://localhost:3000,http://localhost:3001
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# ===========================================
# Monitoring & Observability
# ===========================================
# (Optional) Enable Prometheus metrics - Default: true
METRICS_PROMETHEUS_ENABLED=true

# (Optional) Actuator endpoints to expose
# Default: health,info,metrics,prometheus
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info,metrics,prometheus

# ===========================================
# Environment-Specific Configurations
# ===========================================

# For Production:
# -----------------
# REQUIRED CHANGES:
# 1. POSTGRES_PASSWORD - Use strong random password (min 20 chars)
# 2. REDIS_PASSWORD - Use strong random password (min 20 chars)
# 3. JWT_SECRET - Generate with: openssl rand -base64 32
# 4. BASE_URL - Update to your production domain (e.g., https://short.example.com)
# 5. NEXT_PUBLIC_API_URL - Update to your production API URL (e.g., https://api.example.com/api/v1)
# 6. NEXT_PUBLIC_BASE_URL - Update to your production domain (e.g., https://short.example.com)
#
# RECOMMENDED CHANGES:
# - SPRING_PROFILES_ACTIVE=prod
# - NODE_ENV=production
# - REDIS_SSL=true (if using managed Redis)
# - Enable database connection pooling
# - Configure proper log aggregation
# - Use secrets management (AWS Secrets Manager, HashiCorp Vault, etc.)

# For Development:
# -----------------
# - SPRING_PROFILES_ACTIVE=dev
# - NODE_ENV=development
# - Keep default passwords (easier local setup)
# - LOGGING_LEVEL_APP=DEBUG
# - Enable debug ports (JAVA_DEBUG_PORT=5005)

# For Testing:
# -----------------
# - SPRING_PROFILES_ACTIVE=test
# - POSTGRES_DB=urlshortener_test
# - Use separate test database
# - Disable external services if needed
